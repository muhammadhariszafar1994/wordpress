!function(){var e={574:function(e){e.exports=function(){if(!arguments.length)throw new TypeError("isset requires at least one accessor function");return Array.prototype.slice.call(arguments).every((e=>{if("function"!=typeof e)throw new TypeError("isset requires accessors to be functions");try{return null!=e()}catch(e){return!1}}))}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}!function(){const e=n(574);!function(t){const n=document.getElementById("migrate"),r=t("#learndash_settings_migration_course"),a=t("#learndash_settings_migration_source");n.addEventListener("click",(function(e){if(e.preventDefault(),null===a.val()||a.val().length<1)return alert(LearnDashMigrationAdmin.text.error_empty_source),!1;if(null===r.val()||r.val().length<1)return alert(LearnDashMigrationAdmin.text.error_empty_course),!1;this.setAttribute("disabled",!0),this.innerHTML='<div class="loader"></div>',this.classList.add("in-progress");const t=this.parentElement.querySelector(".status");null!==t&&t.remove(),this.insertAdjacentHTML("afterend",'<span class="status">'+LearnDashMigrationAdmin.text.progress_status_init+"</span>"),s()})),window.addEventListener("load",(function(){r.select2({ajax:{url:LearnDashMigrationAdmin.ajaxurl,delay:300,dataType:"json",data:e=>({action:LearnDashMigrationAdmin.action.get_courses,nonce:LearnDashMigrationAdmin.nonce.get_courses,post_type:LearnDashMigrationAdmin.course_post_types[a.val()],keyword:e.term,page:e.page}),processResults:e=>({results:e.data.results,pagination:e.data.pagination})},dropdownAutoWidth:!0,placeholder:LearnDashMigrationAdmin.text.select_a_course,width:"100%"})})),t("#learndash_settings_migration_source").on("change",(function(){r.val(null).trigger("change"),t(this).val().length>0?t("#learndash_settings_migration_course_field").show():t("#learndash_settings_migration_course_field").hide()}));const s=(t=1)=>{const r=new FormData,a=document.getElementById("learndash_settings_migration_source").value,i=document.getElementById("learndash_settings_migration_course").value;r.append("action",LearnDashMigrationAdmin.action.migrate),r.append("nonce",LearnDashMigrationAdmin.nonce.migrate),r.append("source",a),r.append("course_id",i),r.append("step",t),fetch(LearnDashMigrationAdmin.ajaxurl,{method:"POST",credentials:"same-origin",body:r}).then((e=>e.json())).then((r=>{e((()=>r.data.completed))&&r.data.completed?(n.removeAttribute("disabled"),n.innerHTML=LearnDashMigrationAdmin.text.migrate_course,n.classList.remove("in-progress"),n.parentElement.querySelector(".status").innerHTML=LearnDashMigrationAdmin.text.progress_status_end,n.parentElement.querySelector(".new-course-url").href=decodeURI(r.data.new_course_url),setTimeout((()=>{}),200)):s(a,t+1)})).catch((()=>{}))}}(jQuery)}()}();