var FieldEditor=function(){return{init:function(){jQuery(".wp-event-manager-event-form-field-editor").on("init",FieldEditor.actions.initSortable),jQuery(".wp-event-manager-event-form-field-editor").trigger("init"),jQuery(".add-field").on("click",FieldEditor.actions.addNewFields),jQuery("body").on("click",".child-add-field",FieldEditor.actions.addNewChildFields),jQuery(".wp-event-manager-event-form-field-editor").on("change",".field-type select",FieldEditor.actions.changeFieldTypeOptions),jQuery(".delete-field").on("click",FieldEditor.actions.deleteField),jQuery(".reset").on("click",FieldEditor.actions.resetFields),jQuery(".wp-event-manager-organizer-form-field-editor").on("init",FieldEditor.actions.initSortable),jQuery(".wp-event-manager-organizer-form-field-editor").trigger("init"),jQuery("body").on("change",".wp-event-manager-event-form-field-editor #bulk-select",FieldEditor.actions.displayRemoveButton),jQuery(".remove-button").on("click",FieldEditor.actions.deleteBulkSelectField)},actions:{displayRemoveButton:function(e){e.preventDefault();var t=jQuery(this).closest(".wp-event-manager-event-form-field-editor"),i=t.find(".remove-button");t.find("#bulk-select:checked").length>0?i.show():i.hide()},deleteBulkSelectField:function(e){e.preventDefault(),confirm("Are you sure you want to delete the selected fields?")&&(jQuery(this).closest(".wp-event-manager-event-form-field-editor").find("#bulk-select:checked").closest("tr").remove(),jQuery(this).hide())},initSortable:function(){jQuery(this).sortable({items:"tr:has(td)",cursor:"move",axis:"y",handle:"td.sort-column",scrollSensitivity:40,helper:function(e,t){return t.children().each(function(){jQuery(this).width(jQuery(this).width())}),t},start:function(e,t){t.item.css("background-color","#FEFEE6")},stop:function(e,t){t.item.removeAttr("style")}}),jQuery(this).find(".field-type select").each(FieldEditor.actions.changeFieldTypeOptions),jQuery(this).find(".field-rules select:visible").chosen()},deleteField:function(){if(window.confirm(wp_event_manager_form_editor.cofirm_delete_i18n)){var e=jQuery(this).closest("tr").data("field-type"),t=jQuery(this).closest("tr").data("field-meta");jQuery("#"+t+"_visibility").val("0"),"group"===e?(jQuery(this).closest("tr").next("tr.group").remove(),jQuery(this).closest("tr").remove()):jQuery(this).closest("tr").css("display","none")}return!1},resetFields:function(){return!!window.confirm(wp_event_manager_form_editor.cofirm_reset_i18n)},addNewFields:function(){var e=jQuery(this).closest("table").find("tbody#form-fields"),t=e.data("field");return t=t.replace(/\[-1\]/g,"["+e.find("tr").size()+"]"),e.append(t),jQuery(".wp-event-manager-event-form-field-editor").trigger("init"),jQuery(".delete-field").on("click",FieldEditor.actions.deleteField),!1},addNewChildFields:function(){var e=jQuery(this).closest("table.child_table").find("tbody.child-form-fields"),t=e.data("field");t=t.replace(/\[-1\]/g,"["+e.find("tr").size()+"]");var i=jQuery(this).closest("tr.group").prev().find("select.field_type").attr("name");return i=i.replace(/\[type\]/g,""),t=t.replace(/\[\]/g,i),e.append(t),jQuery(".wp-event-manager-event-form-field-editor").trigger("init"),jQuery(".delete-field").on("click",FieldEditor.actions.deleteField),!1},changeFieldTypeOptions:function(){jQuery(this).closest("tr").find(".field-options .placeholder").hide(),jQuery(this).closest("tr").find(".field-options .options").hide(),jQuery(this).closest("tr").find(".field-options .na").hide(),jQuery(this).closest("tr").find(".field-options .file-options").hide(),jQuery(this).closest("tr").find(".field-options .taxonomy-select").hide(),jQuery(this).closest("tr").data("field-type"),"select"===jQuery(this).val()||"multiselect"===jQuery(this).val()||"button-options"===jQuery(this).val()||"radio"===jQuery(this).val()?jQuery(this).closest("tr").find(".field-options .options").show():"file"===jQuery(this).val()?jQuery(this).closest("tr").find(".field-options .file-options").show():"term-select"===jQuery(this).val()||"term-checklist"===jQuery(this).val()||"term-multiselect"===jQuery(this).val()?jQuery(this).closest("tr").find(".field-options .taxonomy-select").show():jQuery(this).closest("tr").find(".field-options .placeholder").show(),jQuery(this).closest("tr").find(".field-rules .rules").hide(),jQuery(this).closest("tr").find(".field-rules .na").hide(),jQuery(this).closest("tr").find(".field-rules .rules").show(),jQuery(this).closest("tr").find(".field-rules select:visible").chosen()}}}};FieldEditor=FieldEditor(),jQuery(document).ready(function(e){FieldEditor.init()});